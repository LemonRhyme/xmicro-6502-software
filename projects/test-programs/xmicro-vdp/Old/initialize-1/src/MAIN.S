.PC02

.INCLUDE "INSTRUCTIONS.MAC"
.INCLUDE "XM7SEG.MAC"

.MACRO NOPS N
	.REPEAT N
		NOP
	.ENDREPEAT
.ENDMACRO

.SEGMENT "ZEROPAGE"
SECONDS_BUFFER:	.RES 2


.SEGMENT "STARTUP"

XMICRO_MEMORY = $7100
RTC = XMICRO_MEMORY+$10

VDP = $7400


_INIT:
	SEI
	CLC
	LDX #$FF
	TXS

;----RTC INIT---
	LDA #%00000000		;DISABLE INTERRUPTS
	STA RTC+$0C

	JSR XM7SEG_INIT
	XM7SEG_ON
	XM7SEG_WORD #$1111

;----VDP INIT----
	LDA #%00000000		;R0
	STA VDP+1
	NOPS 20
	LDA #$80+0
	STA VDP+1
	NOPS 20

	LDA #%01010000		;R1
	STA VDP+1
	NOPS 20
	LDA #$80+1
	STA VDP+1
	NOPS 20

	LDA #%00000000		;R2
	STA VDP+1
	NOPS 20
	LDA #$80+2
	STA VDP+1
	NOPS 20

	LDA #%00000001		;R4
	STA VDP+1
	NOPS 20
	LDA #$80+4
	STA VDP+1
	NOPS 20

	LDA #%00001000		;R8
	STA VDP+1
	NOPS 20
	LDA #$80+8
	STA VDP+1
	NOPS 20

	LDA #%11110000		;R7
	STA VDP+1
	NOPS 20
	LDA #$80+7
	STA VDP+1
	NOPS 20

	LDA #%00000000		;R9
	STA VDP+1
	LDA #$80+9
	STA VDP+1


	JMP _MAIN

.SEGMENT "CODE"

_MAIN:
	INX
	JMP _MAIN
